template: /app/gateway-base.yaml
# Note: OAuth configuration is in gateway-base.yaml or via environment variables
# To enable API key generation feature, set:
# oauth.enable_api_key: true
# or environment variable: OAUTH_ENABLE_API_KEY=true
listener:
  address: 0.0.0.0
  port: 8081
oauth:
  session_cookie_name: pkgw
  session_secure: false
  session_http_only: true
  session_same_site: Lax
clients:
  - id: keycloak #required
    address: keycloak # required
    domain: localhost:8081
    port: 8080 # default 8080
    ssl: false # default false
    exclude: true # default false
    prefix: /auth #default /
    sso_injection: true
    sso_appurl: http://localhost:8081/auth
    sso_appname: Keycloak
  - id: admin_cluster #required
    address: httpbin.org # required
    domain: localhost:8081
    port: 443 # default 8080
    ssl: true # default false
    exclude: false
    sso_injection: true
    sso_appurl: http://localhost:8081/
    sso_appname: Admin
    prefix: /
    exclude_paths: # optional
      - /healthz
      - /metrics
  - id: echo_service_cluster
    domain: localhost:8081
    host_rewrite: httpbin.org
    address: http-echo
    port: 8080
    ssl: false
    exclude: false
    prefix: /echo
    sso_injection: true
    sso_appurl: http://localhost:8081/echo
    sso_appname: Echo
    exclude_paths:
      - /status/200
      - /status/201
  - id: echo2_service_cluster
    domain: local.home:8081
    host_rewrite: httpbin.org
    address: http-echo
    port: 8080
    ssl: false
    exclude: false
    exclude_paths:
      - /favicon.ico
  - id: shortsui_service_cluster
    domain: localhost:8081
    address: shorts
    port: 8080
    prefix: /sui
    sso_injection: true
    sso_appurl: http://localhost:8081/sui
    sso_appname: Shorts
  - id: shorts_service_cluster
    domain: localhost:8081
    address: shorts
    port: 8080
    prefix: /s
    exclude: true
