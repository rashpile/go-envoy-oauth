# Template configuration (optional)
# Can be specified here or via --template CLI flag
# template: example-template.yaml

# Listener configuration (optional)
# Can also be set via environment variables:
#   LISTENER_ADDRESS=0.0.0.0
#   LISTENER_PORT=8080
listener:
  address: 0.0.0.0  # optional, default: 0.0.0.0
  port: 8080        # optional, default: 8080

plugin:
  library_path: /app/go-envoy-oauth.so # optional, default: /app/go-envoy-oauth.so
oauth:
  issuer_url: "https://your_issuer_url_here"
  client_id: "your_client_id_here"
  client_secret: "your_client_secret_here"
  redirect_url: "/oauth/callback" #default "/oauth/callback"
  enable_api_key: false # optional, default: false - Enable API key generation feature
  enable_bearer_token: true # optional, default: true - Enable bearer token authentication
clients:
  - id: admin_cluster #required
    domain: httpbin.org # optional - domain for routing
    address: httpbin.org # required - upstream address
    port: 443 # default 8080
    ssl: true # default false
    exclude: true # default false
    prefix: /ip #default /
    sso_injection: false # optional, default: false - Enable SSO script injection for HTML pages
    exclude_paths: # optional
      - /healthz
      - /metrics
  - id: echo_service_cluster
    domain: echo.example.com # optional - domain for routing
    address: httpbin.org
    port: 443
    ssl: true
    exclude: false
    prefix: /
    sso_injection: true # optional, default: false - Enable SSO script injection for HTML pages
    exclude_paths:
      - /status/200
      - /status/201
